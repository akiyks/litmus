C C-MP+o-wb-o+o-rb-dep-o
(* Allowed: No actual dependency in P1. *)
{
int a=0;
x = 2;
int *p = &a;
}

P0(int *x, int **p)
{
	WRITE_ONCE(*x, 4);
	smp_wmb();
	WRITE_ONCE(*p, x);
}

P1(int **p, int *x)
{
	int *r1; int r2;
	r1 = READ_ONCE(*p);
	smp_read_barrier_depends();
	r2 = READ_ONCE(*x);
}

exists (1:r1 = x /\ 1:r2 = 2)
